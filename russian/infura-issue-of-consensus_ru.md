---
title: Infura - проблема консенсуса
date: 11 ноября 2020
tags:
  - geth
  - infura
  - эфириум
  - форк
excerpt: Консенсус это не только про соглашение, его главное назначение в том, чтобы изменить положение вещей. Сегодня во всей сети Эфириума были проблемы, потому как главная сеть попала под удар из-за ошибок консенсуса.
banner: https://raw.githubusercontent.com/RektHQ/Assets/main/images/2020/11/12-angry-men-1.jpg
---

![](https://raw.githubusercontent.com/RektHQ/Assets/main/images/2020/11/12-angry-men-1.jpg)

**Консенсус это не только про соглашение, его главное назначение в том, чтобы изменить положение вещей.**

Сегодня во всей сети Эфириума были проблемы, потому как главная сеть попала под удар из-за ошибок консенсуса. 

Сервисы, использующие старые версии geth-нод застряли в малой цепи, что вызвало эффект домино на всех привязанных к ним приложениях.

Большинство пользователей узнало о проблеме, когда упал API Infura. Infura является самым крупным провайдером нод в сети Эфириума. Они поставляют инструменты и инфраструктуру одним из самых используемых приложений Web 3.0 и централизованным биржам, таким как Metamask, Uniswap и Binance.

Деградация качества сервиса Infura выявила, что Binance либо полагается на Infura, либо использует устаревшие ноды. Ни то, ни другое не приемлемо для такого большого обменника.

Может показаться странным, что Infura использовала не самые последние версии [geth](https://geth.ethereum.org/downloads/) но для такого крупномасштабного оператора разумнее не переходить сразу же на самую последнюю версию. Если нет хардфорка, то нет и повода для срочного переключения со стабильного работающего кода на незнакомый.

![](https://raw.githubusercontent.com/RektHQ/Assets/main/images/2020/11/add3dbfcb32773693acdf1699dc73e8f.png)

У системы поиска и анализа Blockchair тоже были проблемы, из-за чего они опубликовали следующий твит:  

> _Мы испытываем затруднения с нашим эксплорером_[_ #Ethereum_](https://twitter.com/hashtag/Ethereum?src=hashtag_click) _и работаем над исправлением. Похоже, что произошло разделение цепи, некоторые ноды (включая наши и ноды некоторых майнеров) застряли в малой цепи._

![](https://raw.githubusercontent.com/RektHQ/Assets/main/images/2020/11/Emh9J7sW8AEB_FT.jpg)

Главный разработчик Blockchair [Никита Жаворонков](https://twitter.com/nikzh/status/1326455533927329792?s=20) сообщил, что получил сообщение об ошибке:

> _########## BAD BLOCK #########_

> _<…>_

> _Error: invalid merkle root (remote: 57cc91ee8b91b956592a27b14386abc2aba723b5f4f9e5d3181ace6b5d3cd433 local: 1f9ee59bfa683a25c7a15b626995a3ad7c58c571b40df96eea31e5c5eed9732d)_

**В сети geth было найдено две серьезные уязвимости, обе обнаружил** [John Youngseok Yang](https://github.com/johnyangk) (Software Platform Lab), что принесло ему 20 тысяч очков на [доске почета](https://bounty.ethereum.org/) программы баунти Эфириума (Ethereum Bounty Program).

Ошибки консенсуса не обсуждаются на Github, чтобы избежать риск эксплоита, поэтому конкретные детали уязвимостей еще не известны.  Для тех, кому хочется узнать поподробнее о технических деталях, [Mhswende ](https://twitter.com/mhswende/status/1326489526450221056?s=20)пишет, что:

> _«Вполне возможно, что в будущем об этом напишут статью или сделают презентацию на devcon»_

Разработчики Ethereum приняли решение сделать хардфорк, чтобы минимизировать сбои.

Как написал [Péter Szilágyi](https://twitter.com/peter_szilagyi/status/1326476649278414850?s=20) в Twitter:

> _Это был «хардфорк-сюрприз» (с неправильной цепи на правильную). И все же, тихо исправить баг, дремавший больше двух лет, имело бы меньше шансов вызвать сбой, чем информировать людей об этой проблеме. Мы стремимся к минимизации потенциального ущерба._

Для всех тех, кто жалуется из-за перебоя в работе Infura, этот инцидент должен послужить своевременным напоминанием о том, что нужно постоянно обновлять свои ноды, потому что, как только вы делегируете свою ноду кому-то другому, они сами решают, как вести свой бизнес.

Infura доказали свою прозрачность на всех этапах этого инцидента, и совершенно точно усердно работают над решением проблемы.

Infura снова [онлайн](https://forkmon.ethdevops.io/), обновления статуса можно найти [здесь](https://status.infura.io/).

**Сбой в работе Infura дал многим понять, как сильно мы зависим от одного лишь этого игрока.**

**Это централизованный сервис, который выполняет роль сторожа нашей децентрализованной системы.**

**Подобные частные предприниматели и организации должны пересмотреть свою стратегию на будущее.**

Впечатление о компетентности больших и надежных обменников, таких как Binance и Bithumb, испарилось, когда они были вынуждены деактивировать выводы ETH и ERC-20 на время сбоя, несмотря на то, что у них было обязательство перед пользователями не подвергать их подобным инцидентам. 

**Мы не можем настолько доверять Infura.**  Из-за того, что MetaMask по умолчанию зависит от централизованного провайдера нод, вся сеть Ethereum временно стала безлюдной, а газ упал до 12 gwei.  

Это доказывает нездоровую зависимость и четко указывает на потенциальный ущерб, который такая зависимость может причинить.

Разве мы хотим, чтобы наше цифровое общество повторяло те же ошибки, что и все остальные, полагаясь на единственные централизованные точки отказа? 

**Мы построили свободный интернет, но отдали его маленькой группе централизованных авторитетов:** Chrome, Safari, Brave... Мы построили альтернативный интернет, в котором изначальные ценности анонимности и децентрализованности живы, но мы назвали его даркнетом, и доступ в имеет только альтернативное, часто блокируемое программное обеспечение.

Мы не можем допустить, чтобы с криптовалютами случилось то же самое.

[David Mihal](https://twitter.com/dmihal/status/1326520031379853313?s=20) написал:

> _Сегодняшнее отключение Infura заставило пользователей со всех ног броситься искать альтернативного провайдера RPC._

> _Я просто накидал_[**_http://ethereumnodes.com_**](https://ethereumnodes.com/), _чтобы создать центральный список общественных, бесплатных конечных точек RPC и их текущих статусов._

[Michael O’Rourke](https://twitter.com/o_rourke/status/1326509249825038336?s=20) подчеркнул, что:

> _Если ваша Metamask не работает, вы можете поменять провайдера RPC на Pocket, перейдя по этой ссылке:_

> [_https://eth-mainnet.gateway.pokt.network/v1/5f3453978e354ab992c4da79…_](https://t.co/7a76Xoo8Qu?amp=1)

**Любое нарушение консенсуса - серьезная проблема.** Хардфорк без предупреждения говорит о том, что если бы эти уязвимости не проверили, они могли бы очень сильно навредить Эфириуму.

К счастью, благодаря зорким глазам охотников на баг баунти и тщательно выполненной работе разработчиков Эфириума, обошлось без ущерба. И как написал Никита Жаворонков в Твиттере, решение оказалось достаточно простым... 

![](https://raw.githubusercontent.com/RektHQ/Assets/main/images/2020/11/end2.jpg)

Кадры из фильма [“12 разгневанных мужчин”](https://www.imdb.com/title/tt0050083/)
